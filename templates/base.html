{% load static %}
<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>{% block title %}École Téléma Ngenga - Leve-toi et brille{% endblock %}</title>
    <link rel="icon" href="/media/Img_logo/logo.png" type="image/png">
    <meta name="description" content="{% block meta_description %}École Téléma Ngenga : Offrir une éducation gratuite et de qualité pour briser le cycle de la pauvreté dans le Grand Bandundu. Leve-toi et brille.{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}telema ngenga, telemangenga, leve toi et brille, levetoietbrille, éducation, Congo, Bandundu, gratuit, école, charité, développement, espoir{% endblock %}">
    <meta name="author" content="École Téléma Ngenga">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:title" content="{% block og_title %}École Téléma Ngenga - Leve-toi et brille{% endblock %}">
    <meta property="og:description" content="{% block og_description %}École Téléma Ngenga : Offrir une éducation gratuite et de qualité pour briser le cycle de la pauvreté dans le Grand Bandundu. Leve-toi et brille.{% endblock %}">
    <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}/media/Img_logo/logo.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ request.build_absolute_uri }}">
    <meta property="twitter:title" content="{% block twitter_title %}École Téléma Ngenga - Leve-toi et brille{% endblock %}">
    <meta property="twitter:description" content="{% block twitter_description %}École Téléma Ngenga : Offrir une éducation gratuite et de qualité pour briser le cycle de la pauvreté dans le Grand Bandundu. Leve-toi et brille.{% endblock %}">
    <meta property="twitter:image" content="{{ request.scheme }}://{{ request.get_host }}/media/Img_logo/logo.png">

    <meta name="theme-color" content="#ffffff" id="theme-color">

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- AOS (Animate On Scroll) CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!-- Fancybox CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css"/>

    <!-- Initial theme to avoid FOUC (flash) -->
    <script>
        (function() {
            try {
                var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                var saved = localStorage.getItem('theme');
                var theme = saved || (prefersDark ? 'dark' : 'light');
                var root = document.documentElement;
                root.setAttribute('data-theme', theme);
                root.classList.toggle('dark', theme === 'dark');
                var metaTheme = document.getElementById('theme-color');
                if (metaTheme) metaTheme.setAttribute('content', theme === 'dark' ? '#020617' : '#ffffff');
            } catch (e) {}
        })();
    </script>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body class="antialiased bg-white dark:bg-slate-950 text-slate-800 dark:text-slate-200">

    <header>
        <nav class="navbar fixed top-0 left-0 right-0 z-50">
            <div class="container max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
                <a href="{% url 'pages:accueil' %}" class="flex items-center gap-3">
                    <div class="w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-cyan-400 p-0.5 shadow-sm flex-shrink-0">
                        <img src="/media/Img_logo/logo.png" alt="Logo École Téléma Ngenga" class="w-full h-full rounded-full object-cover bg-white">
                    </div>
                    <span class="font-bold text-xl text-blue-600 dark:text-blue-500">Téléma Ngenga</span>
                </a>
                <div class="flex items-center gap-2 md:hidden">
                    <button id="themeToggle" class="p-2 rounded-md text-slate-600 dark:text-slate-300" type="button" aria-label="Basculer le thème">
                        <svg id="iconMoon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" /></svg>
                        <svg id="iconSun" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.121-3.536a1 1 0 011.414 0l.707.707a1 1 0 01-1.414 1.414l-.707-.707a1 1 0 010-1.414zM10 16a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM3.05 11.536a1 1 0 011.414 0l.707.707a1 1 0 01-1.414 1.414l-.707-.707a1 1 0 010-1.414zM4.95 6.464a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707z" clip-rule="evenodd" /></svg>
                    </button>
                    <button id="navToggle" class="p-2 rounded-md text-slate-600 dark:text-slate-300" aria-label="Menu" aria-controls="navbarNav" aria-expanded="false">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                    </button>
                </div>
                <div id="navbarNav" class="absolute top-16 left-0 right-0 bg-white/95 dark:bg-slate-900/95 p-4 border-t border-slate-200 dark:border-slate-800 shadow-lg md:static md:flex md:items-center md:gap-6 md:bg-transparent md:p-0 md:border-0 md:shadow-none">
                    <ul class="flex flex-col md:flex-row gap-1 md:gap-5 items-center">
                        <li><a class="nav-link {% if request.resolver_match.url_name == 'accueil' %}active{% endif %}" href="{% url 'pages:accueil' %}">Accueil</a></li>
                        <li><a class="nav-link {% if request.resolver_match.url_name == 'a-propos' %}active{% endif %}" href="{% url 'pages:a-propos' %}">À propos</a></li>
                        <li><a class="nav-link {% if request.resolver_match.url_name == 'histoire' %}active{% endif %}" href="{% url 'pages:histoire' %}">Notre histoire</a></li>
                        <li><a class="nav-link {% if request.resolver_match.url_name == 'mission' %}active{% endif %}" href="{% url 'pages:mission' %}">Notre mission</a></li>
                        <li><a class="nav-link {% if request.resolver_match.namespace == 'actions' %}active{% endif %}" href="{% url 'actions:actions' %}">Nos actions</a></li>
                        <li><a class="nav-link {% if request.resolver_match.namespace == 'equipe' %}active{% endif %}" href="{% url 'equipe:equipe' %}">Nos équipes</a></li>
                        <li><a class="nav-link {% if request.resolver_match.namespace == 'blog' %}active{% endif %}" href="{% url 'blog:post_list' %}">Blog</a></li>
                        <li><a class="nav-link {% if request.resolver_match.namespace == 'contact' %}active{% endif %}" href="{% url 'contact:contact' %}">Contact</a></li>
                    </ul>
                    <div class="hidden md:block border-l border-slate-200 dark:border-slate-700 ml-4 pl-6">
                        <button id="themeToggleDesktop" class="p-2 rounded-md text-slate-600 dark:text-slate-300" type="button" aria-label="Basculer le thème">
                            <svg id="iconMoonDesktop" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" /></svg>
                            <svg id="iconSunDesktop" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.121-3.536a1 1 0 011.414 0l.707.707a1 1 0 01-1.414 1.414l-.707-.707a1 1 0 010-1.414zM10 16a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM3.05 11.536a1 1 0 011.414 0l.707.707a1 1 0 01-1.414 1.414l-.707-.707a1 1 0 010-1.414zM4.95 6.464a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707z" clip-rule="evenodd" /></svg>
                        </button
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="pt-16">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="bg-slate-100 dark:bg-slate-900 pt-16 pb-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 mb-8">
                <!-- About Section -->
                <div class="md:col-span-2 lg:col-span-1">
                    <h3 class="text-xl font-bold mb-4">École Téléma Ngenga</h3>
                    <p class="text-slate-600 dark:text-slate-400">
                        Offrir une éducation gratuite et de qualité pour briser le cycle de la pauvreté dans le Grand Bandundu.
                    </p>
                </div>
    
                <!-- Quick Links -->
                <div>
                    <h4 class="font-semibold text-lg mb-4">Navigation</h4>
                    <ul class="space-y-2">
                        <li><a href="{% url 'pages:a-propos' %}" class="text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">À propos</a></li>
                        <li><a href="{% url 'actions:actions' %}" class="text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Nos actions</a></li>
                        <li><a href="{% url 'blog:post_list' %}" class="text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Blog</a></li>
                        <li><a href="{% url 'contact:contact' %}" class="text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Contact</a></li>
                    </ul>
                </div>
    
                <!-- Contact Info -->
                <div>
                    <h4 class="font-semibold text-lg mb-4">Contactez-nous</h4>
                    <ul class="space-y-2 text-slate-600 dark:text-slate-400">
                        <li>Email: contact@telema-ngenga.org</li>
                        <li>Tél: +243 123 456 789</li>
                    </ul>
                </div>
    
                <!-- Social Media -->
                <div>
                    <h4 class="font-semibold text-lg mb-4">Suivez-nous</h4>
                    <div class="flex space-x-4">
                        <!-- Replace # with your actual social media links -->
                        <a href="#" aria-label="Facebook" class="text-slate-500 hover:text-blue-600 dark:hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/></svg>
                        </a>
                        <a href="#" aria-label="Twitter" class="text-slate-500 hover:text-blue-400 dark:hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616v.064c0 2.297 1.634 4.208 3.803 4.649-.625.17-1.282.26-1.946.26-.306 0-.6-.03-.89-.086.636 1.882 2.484 3.256 4.682 3.295-1.622 1.27-3.666 2.028-5.884 2.028-.382 0-.76-.023-1.134-.067 2.099 1.35 4.596 2.133 7.293 2.133 8.753 0 13.54-7.253 13.54-13.54 0-.206-.005-.412-.013-.617.932-.67 1.733-1.512 2.37-2.45z"/></svg>
                        </a>
                        <a href="#" aria-label="Instagram" class="text-slate-500 hover:text-pink-500 dark:hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.012 3.584-.07 4.85c-.148 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.85s.012-3.584.07-4.85c.149-3.225 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.85-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.947s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44-.645-1.44-1.441-1.44z"/></svg>
                        </a>
                    </div>
                </div>
            </div>
    
            <!-- Sub-footer -->
            <div class="border-t border-slate-200 dark:border-slate-800 mt-8 pt-8 text-center text-slate-500 dark:text-slate-400">
                <p>&copy; {% now "Y" %} École Téléma Ngenga. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <!-- AOS (Animate On Scroll) JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Fancybox JS -->
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>

    <script>
        AOS.init({
            duration: 800, // Durée de l'animation
            once: true // L'animation ne se joue qu'une seule fois
        });
    </script>
    <script>
        (function() {
            // --- THEME SWITCHER --- //
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            const saved = localStorage.getItem('theme');
            const theme = saved || (prefersDark ? 'dark' : 'light');
            const root = document.documentElement;
            const iconMoon = document.getElementById('iconMoon');
            const iconSun = document.getElementById('iconSun');
            const iconMoonDesktop = document.getElementById('iconMoonDesktop');
            const iconSunDesktop = document.getElementById('iconSunDesktop');
            const metaTheme = document.getElementById('theme-color');

            function applyTheme(value) {
                root.setAttribute('data-theme', value);
                root.classList.toggle('dark', value === 'dark');
                const dark = value === 'dark';
                if (iconMoon) iconMoon.classList.toggle('hidden', dark);
                if (iconSun) iconSun.classList.toggle('hidden', !dark);
                if (iconMoonDesktop) iconMoonDesktop.classList.toggle('hidden', dark);
                if (iconSunDesktop) iconSunDesktop.classList.toggle('hidden', !dark);
                if (metaTheme) {
                    metaTheme.setAttribute('content', value === 'dark' ? '#020617' : '#ffffff');
                }
            }
            applyTheme(theme);

            const toggle = document.getElementById('themeToggle');
            const toggleDesktop = document.getElementById('themeToggleDesktop');
            function switchTheme(){
                const current = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                localStorage.setItem('theme', current);
                applyTheme(current);
            }
            if (toggle) toggle.addEventListener('click', switchTheme);
            if (toggleDesktop) toggleDesktop.addEventListener('click', switchTheme);

            // --- MOBILE MENU --- //
            const navToggle = document.getElementById('navToggle');
            if (navToggle) {
              navToggle.addEventListener('click', function() {
                document.body.classList.toggle('mobile-menu-open');
                const isActive = document.body.classList.contains('mobile-menu-open');
                navToggle.setAttribute('aria-expanded', isActive);
              });
            }
        })();
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
